# rt-plots

Monte Carlo simulator with:
* uniform sampling defined by previous value + [-5,5]
* random sampling rate [5,10] Hz per simulator  
* ~~real-time data feed and plotting to a browser front-end~~ removed per suggestion from @luisvillamil
* postgres backend
* grafana for data visualization

# pre-requisites:  

* [python 3.12^](https://www.python.org/downloads/)
* [poetry](https://python-poetry.org/)
* [docker](https://docs.docker.com/engine/install/)

# install & run

```
make service-setup
make service-up
poetry install
poetry run python -m src.sim
```

Open browser and navigate to `http://127.0.0.1:3000` for Grafana 

# application mods

* edit `simulation_ids` in `src/sim/__main__.py` to run more / less sims
* edit `sampling_frequency` in `src/sim/__main__.py` to change the frequency of sampling
* edit `change` in `src/sim/simulator.py` to change sampling method

Add functions to the `Statistics` class in `src/sim/statistics.py` in the following manner to add more plots:

* create a new function that is prepended with `proc_`
* set the value generated by this function to a variable that begins with `self._s_` to add it to plots

# service configuration

Postgres and Grafana services are setup with the `make service-up` command in the base directory, all configuration is performed through environment variables set in `./scripts/sample.env`. The postgres datasource is added using the grafana REST API via  `./scripts/setup-grafana.sh`.

* modify `./scripts/sample.env` to set env vars for services
* view / understand the `./Makefile`  